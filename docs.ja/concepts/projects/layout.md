# プロジェクト構造とファイル

## `pyproject.toml`

Python プロジェクトのメタデータは [`pyproject.toml`](https://packaging.python.org/en/latest/guides/writing-pyproject-toml/) ファイルで定義されます。uv では、プロジェクトのルート ディレクトリを識別するためにこのファイルが必要です。

!!! tip

    `uv init` は新しいプロジェクトを作成するために使用できます。詳細については、[プロジェクトの作成](./init.md)を参照してください。

最小限のプロジェクト定義には、名前とバージョンが含まれます:

```toml title="pyproject.toml"
[project]
name = "example"
version = "0.1.0"
```

追加のプロジェクトメタデータと構成には以下が含まれます:

- [Python のバージョン要件](./config.md#python-version-requirement)
- [依存関係](./dependencies.md)
- [ビルドシステム](./config.md#build-systems)
- [エントリポイント（コマンド）](./config.md#entry-points)

## プロジェクト環境 {#the-project-environment}

uv を使用してプロジェクトで作業する場合、uv は必要に応じて仮想環境を作成します。一部の uv コマンドは一時的な環境を作成しますが (例: `uv run --isolated`)、uv はプロジェクトとその依存関係を含む永続的な環境を `pyproject.toml` の隣の `.venv` ディレクトリで管理します。これは、エディターが簡単に見つけられるようにプロジェクト内に格納されます。エディターは、コード補完や型のヒントを提供するために環境を必要とします。`.venv` ディレクトリをバージョン管理に含めることは推奨されません。内部の `.gitignore` ファイルによって `git` から自動的に除外されます。

プロジェクト環境でコマンドを実行するには、`uv run` を使用します。あるいは、仮想環境の場合と同じようにプロジェクト環境をアクティブ化することもできます。

`uv run` が呼び出されると、プロジェクト環境がまだ存在しない場合はそれを作成し、存在する場合は最新の状態であることを確認します。プロジェクト環境は、`uv sync` を使用して明示的に作成することもできます。詳細については、[ロックと同期](./sync.md) のドキュメントを参照してください。

プロジェクト環境を手動で変更することは推奨されません (例: `uv pip install`)。プロジェクトの依存関係については、`uv add` を使用して環境にパッケージを追加します。1 回限りの要件については、[`uvx`](../../guides/tools.md) または [`uv run --with`](./run.md#requesting-additional-dependencies) を使用します。

!!! tip

    uv でプロジェクト環境を管理したくない場合は、[`managed = false`](../../reference/settings.md#managed) を設定して、プロジェクトの自動ロックと同期を無効にします。例:

    ```toml title="pyproject.toml"
    [tool.uv]
    managed = false
    ```

## ロックファイル {#the-lockfile}

uv は `pyproject.toml` の横に `uv.lock` ファイルを作成します。

`uv.lock` は、オペレーティング システム、アーキテクチャ、Python バージョンなど、考えられるすべての Python マーカーにわたってインストールされるパッケージをキャプチャする _ユニバーサル_ または _クロスプラットフォーム_ のロックファイルです。

プロジェクトの幅広い要件を指定するために使用される `pyproject.toml` とは異なり、ロックファイルにはプロジェクト環境にインストールされている解決済みの正確なバージョンが含まれています。このファイルはバージョン管理にチェックインして、マシン間で一貫性があり再現可能なインストールを可能にする必要があります。

ロックファイルにより、プロジェクトで作業する開発者が一貫したパッケージ バージョン セットを使用していることが保証されます。さらに、プロジェクトをアプリケーションとして展開するときに、使用されているパッケージ バージョンの正確なセットがわかっていることが保証されます。

ロックファイルは、プロジェクト環境を使用する uv 呼び出し (つまり、`uv sync` および `uv run`) 中に [自動的に作成および更新](./sync.md#automatic-lock-and-sync) されます。ロックファイルは、`uv lock` を使用して明示的に更新することもできます。

`uv.lock` は人間が読める TOML ファイルですが、uv によって管理されており、手動で編集しないでください。現時点ではロックファイル用の Python 標準がないため、このファイルの形式は uv に固有であり、他のツールでは使用できません。
