# 配布物のビルド

プロジェクトを他の人に配布するには (たとえば、PyPI などのインデックスにアップロードする)、配布可能な形式でビルドする必要があります。

Python プロジェクトは通常、ソース ディストリビューション (sdists) とバイナリ ディストリビューション (wheels) の両方として配布されます。前者は通常、プロジェクトのソース コードと追加のメタデータを含む `.tar.gz` または `.zip` ファイルであり、後者は直接インストールできるビルド済みの成果物を含む `.whl` ファイルです。

!!! important

    `uv build` を使用する場合、uv は [ビルド フロントエンド](https://peps.python.org/pep-0517/#terminology-and-goals) として機能し、使用する Python バージョンを決定してビルド バックエンドを呼び出すだけです。ビルドの詳細 (含まれるファイルや配布ファイル名など) は、[`[build-system]`](./config.md#build-systems) で定義されているように、ビルド バックエンドによって決定されます。ビルド構成に関する情報は、それぞれのツールのドキュメントに記載されています。

## `uv build` を使用する

`uv build` は、プロジェクトのソース ディストリビューションとバイナリ ディストリビューションの両方をビルドするために使用できます。デフォルトでは、`uv build` は現在のディレクトリにプロジェクトをビルドし、ビルドされた成果物を `dist/` サブディレクトリに配置します:

```console
$ uv build
$ ls dist/
example-0.1.0-py3-none-any.whl
example-0.1.0.tar.gz
```

`uv build` へのパス (例: `uv build path/to/project`) を指定することで、別のディレクトリにプロジェクトをビルドできます。

`uv build` は最初にソースディストリビューションをビルドし、次にそのソースディストリビューションからバイナリディストリビューション (wheel) をビルドします。

`uv build` を、`uv build --sdist` でソース ディストリビューションのビルド、`uv build --wheel` でバイナリ ディストリビューションのビルドに制限することも、`uv build --sdist --wheel` でソースから両方のディストリビューションをビルドすることもできます。

## ビルドの制約

`uv build` は `--build-constraint` を受け入れます。これは、ビルドプロセス中にビルド要件のバージョンを制限するために使用できます。`--require-hashes` と組み合わせると、uv は、再現性を確保するために、プロジェクトのビルドに使用される要件が特定の既知のハッシュと一致することを強制します。

たとえば、次の `constraints.txt` があるとします:

```text
setuptools==68.2.2 --hash=sha256:b454a35605876da60632df1a60f736524eb73cc47bbc9f3f1ef1b644de74fd2a
```

以下を実行すると、指定されたバージョンの `setuptools` を使用してプロジェクトがビルドされ、ダウンロードされた `setuptools` ディストリビューションが指定されたハッシュと一致することが確認されます:

```console
$ uv build --build-constraint constraints.txt --require-hashes
```
